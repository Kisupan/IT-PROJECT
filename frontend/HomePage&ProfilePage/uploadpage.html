<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Upload Page Draft</title>
    <link href="bootstrapPackage/bootstrap.min.css" rel="stylesheet">
    <link href="uploadpage.css" rel="stylesheet">
    <link href="page-foot.css" rel="stylesheet">
</head>

<body>
    <div class="uploadPage" id="myUploadPage">
        <div class="nav-area">
            <nav class="navbar bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="index.html">
                        <img src="resources/Logo03.PNG" alt="" width="50" height="50"
                            class="d-inline-block align-text-center">
                        <p class="web-name" style="color:rgb(86, 121, 182); display: inline-block;">VShare</p>
                    </a>
                    <form class="d-flex" role="search">
                        <input id="search-bar" class="form-control" type="search" placeholder="Search"
                            aria-label="Search">
                        <button id="search-btn" class="btn btn-outline-primary" type="submit">Search</button>
                    </form>
                    <div class="sign-out">
                        <a class="btn btn-outline-primary" href="blankpage.html" role="button">Sign out</a>
                    </div>
                </div>
            </nav>
        </div>

        <div class="account-area">
            <nav class="navbar bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="profilepage.html">
                        <img src="resources/ZCC.JPG" alt="" width="100" height="100"
                            class="d-inline-block align-text-center" style="border-radius: 50%;">
                        <p class="web-name" style="color:black; display: inline-block;">Congcong Zhao</p>
                    </a>
                </div>
            </nav>
        </div>

        <div class="upload-area">
            <div class="video-file-container">
                <input type="file" class="video-file" v-model="myfile" accept="video/*">
            </div>
            <div class="video-info-container">
                <form class="video-info">
                    Title: <input type="text" class="video-title" maxlength="100" v-model="title"> <br>
                    <!-- Category: <select id="inputCate" class="cate">
                        <option selected>Please select</option>
                        <option>Sports</option>
                        <option>Music</option>
                        <option>Food</option>
                        <option>Fashion</option>
                        <option>Technology</option>
                        <option>News</option>
                        <option>Pet</option>
                        <option>Travel</option>
                    </select> -->
                </form>
            </div>
            <div class="video-cover">
                <input type="file" class="video-cover-image" accept="image/*">
            </div>
            <div class="submit-container">
                <button type="submit" class="btn btn-primary" @click="uploadVideo()">Submit</button>
            </div>
        </div>

        <div class="foot-page">
            <div class="foot-container">
                <a class="navbar-brand" href="index.html">
                    <img src="resources/Logo03.PNG" alt="" width="100" height="100"
                        class="d-inline-block align-text-center" style="margin-top:50px; margin-left: 50px;">
                </a>
                <div class="foot-btn">
                    <div class="term-btn">
                        <a class="btn btn-light" href="blankpage.html" role="button" target="_blank"
                            style="margin-left:200px; margin-top: 55px">Term</a>
                    </div>
                </div>
                <div class="foot-btn">
                    <div class="privacy-btn">
                        <a class="btn btn-light" href="blankpage.html" role="button" target="_blank"
                            style="margin-left:130px; margin-top: 55px">Privacy</a>
                    </div>
                </div>
                <div class="foot-btn">
                    <div class="support-btn">
                        <a class="btn btn-light" href="blankpage.html" role="button" target="_blank"
                            style="margin-left:130px; margin-top: 55px">Support</a>
                    </div>
                </div>
                <div class="foot-btn">
                    <div class="contact-btn">
                        <a class="btn btn-light" href="blankpage.html" role="button" target="_blank"
                            style="margin-left:130px; margin-top: 55px">Contact</a>
                    </div>
                </div>
                <div class="foot-btn">
                    <div class="about-btn">
                        <a class="btn btn-light" href="blankpage.html" role="button" target="_blank"
                            style="margin-left:130px; margin-top: 55px">About us</a>
                    </div>
                </div>
            </div>
        </div>
        <script src="bootstrapPackage/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <!-- <script src="//cdn.jsdelivr.net/npm/element-plus"></script> -->
</body>
<script>
    new Vue({
        el: "myUploadPage",
        data: {
            uploadVideoData: {
                _id: "",
                title: "",
                myfile: ""
            }
        },

        methods: {
            getProfileInfoServer: function () {
                var that = this;
                axios.get('http://localhost:3000/api/findall', {
                    params: {
                        email: ""
                    }
                })
                    .then(function (response) {
                        // handle success
                        var result = response.data;
                        console.log(result);
                        if (result.status == 200) {
                            that.uploadVideoData._id = result._id;
                        }
                    })
                    .catch(function (error) {
                        // handle error
                        console.log(error);
                    })
                    .then(function () {
                        // always executed
                    });
            },

            uploadVideo: function () {
                var that = this;
                axios.post('http://localhost:3000/api/video', {
                    _id: uploadVideoData._id,
                    title: uploadVideoData.title,
                    file: uploadVideoData.myfile
                })
                    .then(function (response) {
                        console.log(response);
                        if (response.status == 201) {
                            alert("Update successful!");
                        } else {
                            alert("Update Unsuccessful, please try again!");
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            }
        },
    })
</script>


</html>